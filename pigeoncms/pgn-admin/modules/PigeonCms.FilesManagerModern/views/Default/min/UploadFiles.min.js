function doUploadFile(){var e=$("#fileselect").val();if(e){var n=document.getElementById("fileselect").files[0],a=new FormData;a.append("file",n),sendFileToServer(a,status)}}!function(){function e(e,n){var a=$("#hidCurrViewPath").val()+"UploadFile.ashx",r=$.ajax({xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var n=0,a=e.loaded||e.position,r=e.total;e.lengthComputable&&(n=Math.ceil(a/r*100))},!1),e},url:a,type:"POST",contentType:!1,processData:!1,cache:!1,data:e,success:function(e){e>0?n.setProgress(100):(openMessage(),$(".box-insert").removeClass("box-insert--dragenter"),$(".drop-label").removeClass("drop-label--dragenter"),$(".icon-image--hover").removeClass("icon-image--hover--dragenter"))},error:function(){$(".box-insert").removeClass("box-insert--dragenter"),$(".drop-label").removeClass("drop-label--dragenter"),$(".icon-image--hover").removeClass("icon-image--hover--dragenter"),alert("error")}});n.setAbort(r)}function n(e){o++;var n="odd";o%2==0&&(n="even"),this.progressBar=$(".progress-bar"),e.after(this.statusbar),this.setProgress=function(e){this.progressBar.css("opacity","1");var n=e*this.progressBar.width()/100;this.progressBar.find("div").animate({width:n},2e3,function(){t()}),parseInt(e)>=100},this.setAbort=function(){}}function a(e,n){for(var a=0;a<e.length;a++){var t=new FormData;t.append("file",e[a]),r(t,n)}}function r(a,r){var t=$("#hidMuduleId").val(),o=$("#hidFolderName").val();a.append("moduleid",t),a.append("foldername",o);var d=new n(r);e(a,d)}function t(e){var n=($(".body-modern-masterblank"),$(".body-modern-masterblank--inner")),a=$("#linktoreload").val();null!=e&&(a+="&folder="+e),$(document).off("click",".btn-navigate-folder"),$(document).off("click",".btn-edit-element"),$(document).off("click",".btn-delete"),$(document).off("click",".btn-create-newfolder"),$(document).off("click",".box-insert"),$(document).off("change","#fileselect"),n.empty(),n.load(a)}var o=0;$(document).ready(function(){function e(){koConfirm(),t(null)}function n(e){koConfirm(),t(e)}function o(e){console.log(e)}$(document).on("dragenter","#dragandrophandler",function(e){e.stopPropagation(),e.preventDefault(),$(".box-insert").addClass("box-insert--dragenter"),$(".drop-label").addClass("drop-label--dragenter"),$(".icon-image--hover").addClass("icon-image--hover--dragenter")}),$(document).on("dragover","#dragandrophandler",function(e){e.stopPropagation(),e.preventDefault()}),$(document).on("drop","#dragandrophandler",function(e){e.preventDefault();var n=e.originalEvent.dataTransfer.files;a(n,$("#dragandrophandler"))}),$(document).on("change","#fileselect",function(){var e=$(this).val();if(e){var n=document.getElementById("fileselect").files[0],a=new FormData;a.append("file",n),$(".box-insert").addClass("box-insert--dragenter"),$(".drop-label").addClass("drop-label--dragenter"),$(".icon-image--hover").addClass("icon-image--hover--dragenter"),r(a,$(this))}}),$(document).on("click",".box-insert",function(){console.log("click insert"),$(this).next().find("input[type=file]").trigger("click")}),$(document).on("click",".btn-delete",function(){var n=$(this),a=n.data("path"),r=n.data("isfolder"),t=n.data("filename");return DeleteItems(e,o,a,t,r),!1}),$(document).on("click",".btn-create-newfolder",function(){var n=$(this),a=n.data("path"),r=$(".adminSmallText").val();return console.log(r),"<folder>"!=r&&void 0!==r&&CreateNewFolder(e,o,a,r),!1}),$(document).on("click",".btn-navigate-folder",function(){var e=$(this),a=e.data("folder"),r=e.data("foldername");return void 0!==r&&NavigateFolder(n,o,a,r),!1}),$(document).on("click",".btn-edit-element",function(){var e=$(this),a=e.data("folder"),r=e.data("foldername");return void 0!==r&&NavigateFolder(n,o,a,r),!1})})}();